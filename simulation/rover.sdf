<?xml version="1.0" ?>
<sdf version="1.6">
  <model name="tank_drive_robot">
    <!-- Static attribute defines whether the robot is fixed in space or can move -->
    <static>false</static>

    <!-- Define the base link -->
    <link name="base_link">
      <pose>0 0 0 0 0 0</pose>
      <collision name="collision_base">
        <geometry>
          <box>
            <size>1.0 0.6 0.2</size> <!-- Dimensions of the base chassis -->
          </box>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>1.0</mu>
              <mu2>1.0</mu2>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="visual_base">
        <geometry>
          <box>
            <size>1.0 0.6 0.2</size> <!-- Same size as collision -->
          </box>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.8 0.8 0.8 1</diffuse>
        </material>
      </visual>
    </link>

    <!-- Define wheels -->
    <!-- Left Front Wheel -->
    <link name="left_front_wheel">
      <pose>-0.4 0.35 0 -1.5707 0 0</pose> <!-- Position relative to base link -->
      <collision name="collision_left_front_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius> <!-- Wheel radius -->
            <length>0.05</length> <!-- Wheel width -->
          </cylinder>
        </geometry>
      </collision>
      <visual name="visual_left_front_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.6 0.6 0.6 1</diffuse>
        </material>
      </visual>
    </link>

    <!-- Right Front Wheel -->
    <link name="right_front_wheel">
      <pose>-0.4 -0.35 0 -1.5707 0 0</pose>
      <collision name="collision_right_front_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="visual_right_front_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.6 0.6 0.6 1</diffuse>
        </material>
      </visual>
    </link>

    <!-- Left Rear Wheel -->
    <link name="left_rear_wheel">
      <pose>0.4 0.35 0 -1.5707 0 0</pose>
      <collision name="collision_left_rear_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="visual_left_rear_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.6 0.6 0.6 1</diffuse>
        </material>
      </visual>
    </link>

    <!-- Right Rear Wheel -->
    <link name="right_rear_wheel">
      <pose>0.4 -0.35 0 -1.5707 0 0</pose>
      <collision name="collision_right_rear_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="visual_right_rear_wheel">
        <geometry>
          <cylinder>
            <radius>0.2</radius>
            <length>0.05</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.6 0.6 0.6 1</diffuse>
        </material>
      </visual>
    </link>

    <!-- Joints -->
    <!-- Front Left Wheel Joint -->
    <joint name="left_front_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>left_front_wheel</child>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
       </limit>
      </axis>
    </joint>

    <!-- Front Right Wheel Joint -->
    <joint name="right_front_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>right_front_wheel</child>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <!-- Rear Left Wheel Joint -->
    <joint name="left_rear_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>left_rear_wheel</child>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <!-- Rear Right Wheel Joint -->
    <joint name="right_rear_wheel_joint" type="revolute">
      <parent>base_link</parent>
      <child>right_rear_wheel</child>
      <axis>
        <xyz>0 1 0</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <!-- Plugins -->
    <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
      <ros>
        <namespace>/</namespace>
        <remapping>cmd_vel:=/cmd_vel</remapping>
      </ros>
      <left_joint>left_front_wheel_joint</left_joint>
      <left_joint>left_rear_wheel_joint</left_joint>
      <right_joint>right_front_wheel_joint</right_joint>
      <right_joint>right_rear_wheel_joint</right_joint>
      <wheel_separation>0.7</wheel_separation>
      <wheel_radius>0.2</wheel_radius>
      <update_rate>100</update_rate>
    </plugin>

  </model>
</sdf>
 
