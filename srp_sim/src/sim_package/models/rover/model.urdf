<robot name="rover">
    <link name="base_link">
        <inertial>
            <origin xyz="0.011999 0.002 0.066996" rpy="0 0 0" />
            <mass value="16.524" />
            <inertia ixx="0.320605" ixy="-0.000800023" ixz="0.0163992" 
                    iyy="0.399205" iyz="-0.000900133" izz="0.455501" />
        </inertial>
    
        <collision name="chassis_collision">
            <origin xyz="0 0 0.092" rpy="0 0 0" />
            <geometry>
                <box size="0.42 0.31 0.184" />
            </geometry>
        </collision>

        <visual name="chassis_visual">
            <origin xyz="0 0 -0.0655" rpy="1.5708 0 -1.5708" />
            <geometry>
                <mesh filename="meshes/x2_chassis.dae" />
            </geometry>
        </visual>

        <visual name="navsat_visual_1">
            <origin xyz="-0.18 0.126 0.1895" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.016" radius="0.026" />
            </geometry>
        </visual>

        <visual name="center_left_headlight_visual">
            <origin xyz="0.22 0.05 0.0845" rpy="0 0 -3.14159" />
            <geometry>
                <mesh filename="meshes/headlight.dae" />
            </geometry>
        </visual>

        <visual name="left_headlight_visual">
            <origin xyz="0.22 0.145 0.0845" rpy="0 0 -3.14159" />
            <geometry>
                <mesh filename="meshes/headlight.dae" />
            </geometry>
        </visual>

        <visual name="center_right_headlight_visual">
            <origin xyz="0.22 -0.05 0.0845" rpy="0 0 -3.14159" />
            <geometry>
                <mesh filename="meshes/headlight.dae" />
            </geometry>
        </visual>

        <visual name="right_headlight_visual">
            <origin xyz="0.22 -0.145 0.0845" rpy="0 0 -3.14159" />
            <geometry>
                <mesh filename="meshes/headlight.dae" />
            </geometry>
        </visual>

        <visual name="camera_visual">
            <origin xyz="0.23 0 0.19" rpy="0 0 0" />
            <geometry>
                <box size="0.02 0.02 0.02" />
            </geometry>
        </visual>
    </link>

    <link name="front_left_wheel">
        <inertial>
            <mass value="0.477" />
            <inertia 
                ixx="0.0013" 
                ixy="0" 
                ixz="0" 
                iyy="0.0024" 
                iyz="0" 
                izz="0.0013" />
        </inertial>

        <collision name="collision">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <cylinder length="0.04" radius="0.098" />
            </geometry>
            <surface>
                <friction>
                    <ode>
                        <mu value="1" />
                        <mu2 value="1" />
                        <slip1 value="0.0026" />
                        <slip2 value="0" />
                        <fdir1 value="0 0 1" />
                    </ode>
                </friction>
            </surface>
        </collision>

        <visual name="visual">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <mesh filename="meshes/x2_wheel_left.dae" />
            </geometry>
        </visual>
    </link>

    <link name="front_right_wheel">
        <inertial>
            <mass value="0.477" />
            <inertia 
                ixx="0.0013" 
                ixy="0" 
                ixz="0" 
                iyy="0.0024" 
                iyz="0" 
                izz="0.0013" />
        </inertial>

        <collision name="collision">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <cylinder length="0.04" radius="0.098" />
            </geometry>
            <surface>
                <friction>
                    <ode>
                        <mu value="1" />
                        <mu2 value="1" />
                        <slip1 value="0.0026" />
                        <slip2 value="0" />
                        <fdir1 value="0 0 1" />
                    </ode>
                </friction>
            </surface>
        </collision>

        <visual name="visual">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <mesh filename="meshes/x2_wheel_right.dae" />
            </geometry>
        </visual>
    </link>

    <link name="rear_left_wheel">
        <inertial>
            <mass value="0.477" />
            <inertia 
                ixx="0.0013" 
                ixy="0" 
                ixz="0" 
                iyy="0.0024" 
                iyz="0" 
                izz="0.0013" />
        </inertial>

        <collision name="collision">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <cylinder length="0.04" radius="0.098" />
            </geometry>
            <surface>
                <friction>
                    <ode>
                        <mu value="1" />
                        <mu2 value="1" />
                        <slip1 value="0.0026" />
                        <slip2 value="0" />
                        <fdir1 value="0 0 1" />
                    </ode>
                </friction>
            </surface>
        </collision>

        <visual name="visual">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <mesh filename="meshes/x2_wheel_left.dae" />
            </geometry>
        </visual>
    </link>

    <link name="rear_right_wheel">
        <inertial>
            <mass value="0.477" />
            <inertia 
                ixx="0.0013" 
                ixy="0" 
                ixz="0" 
                iyy="0.0024" 
                iyz="0" 
                izz="0.0013" />
        </inertial>

        <collision name="collision">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <cylinder length="0.04" radius="0.098" />
            </geometry>
            <surface>
                <friction>
                    <ode>
                        <mu value="1" />
                        <mu2 value="1" />
                        <slip1 value="0.0026" />
                        <slip2 value="0" />
                        <fdir1 value="0 0 1" />
                    </ode>
                </friction>
            </surface>
        </collision>

        <visual name="visual">
            <origin xyz="0 0 0" rpy="1.5708 0 0" />
            <geometry>
                <mesh filename="meshes/x2_wheel_right.dae" />
            </geometry>
        </visual>
    </link>

    <link name="imu_link">
        <inertial>
            <mass value="0.1"/> <!-- Example mass value -->
            <inertia ixx="0.001" iyy="0.001" izz="0.001" ixy="0.0" ixz="0.0" iyz="0.0"/>
        </inertial>
    </link>

    <link name="gps_link">
        <inertial>
            <mass value="0.1"/> <!-- Example mass value -->
            <inertia ixx="0.001" iyy="0.001" izz="0.001" ixy="0.0" ixz="0.0" iyz="0.0"/>
        </inertial>
    </link>

    <link name="camera_link">
        <inertial>
            <mass value="0.1"/>  <!-- Example mass value -->
            <inertia ixx="0.001" iyy="0.001" izz="0.001" ixy="0.0" ixz="0.0" iyz="0.0"/>
        </inertial>
    </link>

    <gazebo reference="imu_link">
        <sensor name="imu_sensor" type="imu">
            <always_on>1</always_on>
            <update_rate>50</update_rate>
            <imu>
                <enable_orientation>0</enable_orientation>
                <angular_velocity>
                    <x>
                        <noise type="gaussian">
                            <mean>0</mean>
                            <stddev>0.009</stddev>
                            <bias_mean>0.00075</bias_mean>
                            <bias_stddev>0.005</bias_stddev>
                            <dynamic_bias_stddev>0.00002</dynamic_bias_stddev>
                            <dynamic_bias_correlation_time>400.0</dynamic_bias_correlation_time>
                            <precision>0.00025</precision>
                        </noise>
                    </x>
                    <y>
                        <noise type="gaussian">
                            <mean>0</mean>
                            <stddev>0.009</stddev>
                            <bias_mean>0.00075</bias_mean>
                            <bias_stddev>0.005</bias_stddev>
                            <dynamic_bias_stddev>0.00002</dynamic_bias_stddev>
                            <dynamic_bias_correlation_time>400.0</dynamic_bias_correlation_time>
                            <precision>0.00025</precision>
                        </noise>
                    </y>
                    <z>
                        <noise type="gaussian">
                            <mean>0</mean>
                            <stddev>0.009</stddev>
                            <bias_mean>0.00075</bias_mean>
                            <bias_stddev>0.005</bias_stddev>
                            <dynamic_bias_stddev>0.00002</dynamic_bias_stddev>
                            <dynamic_bias_correlation_time>400.0</dynamic_bias_correlation_time>
                            <precision>0.00025</precision>
                        </noise>
                    </z>
                </angular_velocity>
                <linear_acceleration>
                    <x>
                        <noise type="gaussian">
                            <mean>0</mean>
                            <stddev>0.021</stddev>
                            <bias_mean>0.05</bias_mean>
                            <bias_stddev>0.0075</bias_stddev>
                            <dynamic_bias_stddev>0.000375</dynamic_bias_stddev>
                            <dynamic_bias_correlation_time>175.0</dynamic_bias_correlation_time>
                            <precision>0.005</precision>
                        </noise>
                    </x>
                    <y>
                        <noise type="gaussian">
                            <mean>0</mean>
                            <stddev>0.021</stddev>
                            <bias_mean>0.05</bias_mean>
                            <bias_stddev>0.0075</bias_stddev>
                            <dynamic_bias_stddev>0.000375</dynamic_bias_stddev>
                            <dynamic_bias_correlation_time>175.0</dynamic_bias_correlation_time>
                            <precision>0.005</precision>
                        </noise>
                    </y>
                    <z>
                        <noise type="gaussian">
                            <mean>0</mean>
                            <stddev>0.021</stddev>
                            <bias_mean>0.05</bias_mean>
                            <bias_stddev>0.0075</bias_stddev>
                            <dynamic_bias_stddev>0.000375</dynamic_bias_stddev>
                            <dynamic_bias_correlation_time>175.0</dynamic_bias_correlation_time>
                            <precision>0.005</precision>
                        </noise>
                    </z>
                </linear_acceleration>
            </imu>
        </sensor>
    </gazebo>
    
    <gazebo reference="gps_link">
        <sensor name="navsat" type="navsat">
            <always_on>1</always_on>
            <update_rate>1</update_rate>
            <topic>navsat</topic>
        </sensor>
    </gazebo>

    <gazebo reference="camera_link">
        <sensor name="camera_front" type="rgbd_camera">
            <always_on>1</always_on>
            <update_rate>20</update_rate>
            <horizontal_fov>1.2113</horizontal_fov>
            <lens>
                <intrinsics>
                    <!-- fx = fy = width / ( 2 * tan (hfov / 2 ) ) -->
                    <fx>462.1</fx>
                    <fy>462.1</fy>
                    <!-- cx = ( width + 1 ) / 2 -->
                    <cx>320.5</cx>
                    <!-- cy = ( height + 1 ) / 2 -->
                    <cy>180.5</cy>
                    <s>0</s>
                </intrinsics>
            </lens>
            <distortion>
                <k1>0.0</k1>
                <k2>0.0</k2>
                <k3>0.0</k3>
                <p1>0.0</p1>
                <p2>0.0</p2>
                <center>0.5 0.5</center>
            </distortion>
            <image>
                <width>640</width>
                <height>360</height>
                <format>R8G8B8</format>
            </image>
            <clip>
                <near>0.01</near>
                <far>300</far>
            </clip>
            <depth_camera>
                <clip>
                <near>0.1</near>
                <far>10</far>
                </clip>
            </depth_camera>
            <noise>
                <type>gaussian</type>
                <mean>0</mean>
                <stddev>0.007</stddev>
            </noise>
            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <frameName>camera_link</frameName>
            </plugin>
        </sensor>
    </gazebo>

    <joint name="front_left_wheel_joint" type="revolute">
        <parent link="base_link"/>
        <child link="front_left_wheel"/>
        <axis xyz="0 1 0"/>
        <limit effort="100.0" velocity="10.0" lower="-1e+16" upper="1e+16"/>
        <use_parent_model_frame>1</use_parent_model_frame>
    </joint>

    <joint name="rear_left_wheel_joint" type="revolute">
        <parent link="base_link"/>
        <child link="rear_left_wheel"/>
        <axis xyz="0 1 0"/>
        <limit effort="100.0" velocity="10.0" lower="-1.79769e+308" upper="1.79769e+308"/>
    </joint>

    <joint name="rear_right_wheel_joint" type="revolute">
        <parent link="base_link"/>
        <child link="rear_right_wheel"/>
        <axis xyz="0 1 0"/>
        <limit effort="100.0" velocity="10.0" lower="-1.79769e+308" upper="1.79769e+308"/>
    </joint>

    <joint name="front_right_wheel_joint" type="revolute">
        <parent link="base_link"/>
        <child link="front_right_wheel"/>
        <axis xyz="0 1 0"/>
        <limit effort="100.0" velocity="10.0" lower="-1.79769e+308" upper="1.79769e+308"/>
    </joint>

    <joint name="gps_joint" type="fixed">
        <parent link="base_link"/>
        <child link="gps_link"/>
        <origin xyz="0.1 0 0" rpy="0 0 0"/>
    </joint>

    <joint name="imu_joint" type="fixed">
        <parent link="base_link"/>
        <child link="imu_link"/>
        <origin xyz="0.05 0.1 0" rpy="0 0 0"/>
    </joint>

    <joint name="camera_joint" type="fixed">
        <parent link="base_link"/>
        <child link="camera_link"/>
        <origin xyz="0 0.23 0.19" rpy="0 0 0"/>
    </joint>

    <gazebo>
        <plugin
            filename="ignition-gazebo-sensors-system"
            name="ignition::gazebo::systems::Sensors">
            <render_engine>ogre2</render_engine>
        </plugin>
        <pose>0 0 0.063494 0 0 0</pose>
        <enable_wind>1</enable_wind>
        <plugin
            filename="libignition-gazebo-diff-drive-system.so"
            name="ignition::gazebo::systems::DiffDrive">
            <left_joint>front_left_wheel_joint</left_joint>
            <left_joint>rear_left_wheel_joint</left_joint>
            <right_joint>front_right_wheel_joint</right_joint>
            <right_joint>rear_right_wheel_joint</right_joint>
            <wheel_separation>0.37559</wheel_separation> <!-- Adjusted based on the wheel positions -->
            <wheel_radius>0.098</wheel_radius> <!-- From the wheel dimensions -->
            <odom_publish_frequency>1</odom_publish_frequency>
            <topic>cmd_vel</topic>
        </plugin>
    </gazebo>
</robot>